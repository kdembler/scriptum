<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Scriptum | Post your shit.</title>
    <!-- styles -->
    <link rel="stylesheet" type="text/css" href="bower_components/Materialize/dist/css/materialize.css">
    <link rel="stylesheet" href="bower_components/material-design-icons/iconfont/material-icons.css">
    <link rel="stylesheet" type="text/css" href="stylesheets/main.css">
    <!--    scripts   -->
    <!-- jQuery -->
    <script src="bower_components/jquery/dist/jquery.js" type="text/javascript"></script>
    <!-- Angular -->
    <script src="bower_components/angular/angular.js"></script>
    <!-- Materialize JS -->
    <script src="bower_components/Materialize/dist/js/materialize.js" type="text/javascript"></script>
    <script src="javascripts/materialize-logic.js"></script>
    <!-- scriptumApp -->
    <script src="javascripts/scriptumApp/app.js"></script>
    <!-- services -->
    <script src="javascripts/scriptumApp/services/authFactory.js"></script>
    <script src="javascripts/scriptumApp/services/postsFactory.js"></script>
    <!-- controllers -->
    <script src="javascripts/scriptumApp/controllers/homeCtrl.js"></script>
    <script src="javascripts/scriptumApp/controllers/postCtrl.js"></script>
    <script src="javascripts/scriptumApp/controllers/navCtrl.js"></script>
</head>

<body ng-app="scriptumApp">
    <div ng-controller="HomeCtrl">
        <div id="logout-modal" class="modal modal-scriptum">
            <div class="modal-content">
                <h4>Logout</h4>
                <p>Do you want to logout?</p>
            </div>
            <div class="modal-footer">
                <a ng-click="logOut()" class="btn modal-action modal-close indigo waves-effect">logout</a>
                <a class="btn-flat modal-action modal-close waves-effect waves-red">close</a>
            </div>
        </div>
        <div id="login-modal" class="modal modal-scriptum">
            <div class="modal-content">
                <div class="row">
                    <div class="col s12">
                        <ul class="tabs grey lighten-5 orange-text z-depth-1" id="login-modal-tabs">
                            <li class="tab col s6"><a clss="orange-text active" href="#login-tab">Login</a></li>
                            <li class="tab col s6"><a href="#register-tab">Register</a></li>
                        </ul>
                    </div>
                    <div id="login-tab" class="col s12">
                        <form ng-submit="logMeIn()">
                            <div class="input-field col s12">
                                <i class="material-icons prefix">account_circle</i>
                                <input type="text" ng-model="login.username">
                                <label for="login-input">Identifier</label>
                            </div>
                            <div class="input-field col s12">
                                <i class="material-icons prefix">vpn_key</i>
                                <input type="password" ng-model="login.password">
                                <label for="password-input">Password</label>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn indigo waves-effect">login</button>
                                <a ng-click="resetLogin()" class="btn-flat modal-action modal-close waves-effect waves-red">close</a>
                            </div>
                        </form>
                    </div>
                    <div id="register-tab" class="col s12">
                        <form ng-submit="registerMe()">
                            <div class="input-field col s12">
                                <i class="material-icons prefix">account_circle</i>
                                <input type="text" ng-model="register.username">
                                <label for="login-input">New identifier</label>
                            </div>
                            <div class="input-field col s12">
                                <i class="material-icons prefix">vpn_key</i>
                                <input type="password" ng-model="register.password">
                                <label for="password-input">New password</label>
                            </div>
                            <div class="input-field col s12">
                                <i class="material-icons prefix">vpn_key</i>
                                <input type="password" ng-model="register.repeat">
                                <label for="password-input">Repeat new password</label>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" class="btn indigo waves-effect">register</button>
                                <a ng-click="resetLogin()" class="btn-flat modal-action modal-close waves-effect waves-red">close</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div id="header">
            <nav>
                <div class="nav-wrapper indigo lighten-1">
                    <a class="brand-logo waves-effect waves-light" style="margin-left: 10px;"><i class="material-icons left">email</i>Scriptum</a>
                    <ul class="right hide-on-med-and-down">
                        <li>
                            <a ng-click="openLogModal()" class="waves-effect waves-light waves-block large" ng-mouseenter="lockEnter()" ng-mouseleave="lockLeave()"><i class="material-icons">{{ lockIcon }}</i></a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div id="index-banner" class="parallax-container">
                <div class="section no-pad-bot">
                    <div class="container">
                        <div class="parallax" parallax><img src="images/background.jpg" alt=""></div>
                        <div class="tabs-wrapper">
                            <h1 id="header-text" class="header center indigo-text text-darken-1">Welcome to Scriptum.</h1></div>
                        <div class="row center">
                            <h5 class="header col s12 light grey-text text-darken-4">A website where you can post your shit.</h5>
                        </div>
                        <div class="row center">
                            <a id="getstarted-button" class="btn-large waves-effect waves-light indigo lighten-1" ng-click="scrollToContent()">Get Started</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="content">
            <div class="section">
                <div class="container">
                    <div class="row">
                        <div class="col s12 l12" ng-repeat="post in posts">
                            <div class="card indigo">
                                <div class="card-content white-text">
                                    <span class="card-title">{{post.title}}</span>
                                    <p>{{post.body}}</p>
                                </div>
                                <div class="card-action">
                                    <a ng-click="likePost(post)" class="btn-scriptum-icon"><i class="material-icons text-accent-2" ng-class="post.liking == 1 ? 'orange-text' : 'white-text'">thumb_up</i></a>
                                    <a ng-click="dislikePost(post)" class="btn-scriptum-icon"><i class="material-icons text-accent-2" ng-class="post.liking == -1 ? 'orange-text' : 'white-text'">thumb_down</i></a>
                                    <div class="chip indigo-text">{{post.points}}</div>
                                    <a class="btn-scriptum-icon"><i class="material-icons right activator">comment</i></a>
                                </div>
                                <div class="card-reveal">
                                    <span class="card-title indigo-text">Comments <i class="material-icons right">close</i></span>
                                    <div class="row">
                                        <form ng-submit="addComment(post)">
                                            <div class="input-field col s11 l12">
                                                <i class="material-icons prefix">message</i>
                                                <input ng-model="post.newCommentBody" id="comment-input" type="text" length="100">
                                                <label for="comment-input">Join the discussion...</label>
                                            </div>
                                            <div class="col s1">
                                                <button type="submit" class="btn-floating btn-scriptum-submit waves-effect waves-light indigo"><i class="material-icons">send</i></button>
                                            </div>
                                        </form>
                                    </div>
                                    <ul class="collection">
                                        <li class="collection-item avatar" ng-repeat="comment in post.comments">
                                            <img class="circle" src="images/user43.png" alt="">
                                            <span class="title">{{comment.author}}</span>
                                            <p>{{comment.body}}</p>
                                            <div class="secondary-content">
                                                <div class="chip indigo white-text">{{comment.points}}</div>
                                                <a class="btn-scriptum-icon"><i class="material-icons black-text">grade</i></a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="fixed-action-btn" style="bottom: 45px; right: 24px;">
            <a class="btn-floating btn-large z-depth-1 indigo">
                <i class="material-icons">more_vert</i>
            </a>
            <ul>
                <li>
                    <a id="scrolltop-button" class="btn-floating blue" ng-click="scrollToTop()"><i class="material-icons">expand_less</i></a>
                </li>
                <li ng-show="isLoggedIn()">
                    <!-- <a id="addpost-activator" class="btn-floating red darken-1"><i class="material-icons">add</i></a> -->
                    <button data-target="addpost-modal" class="btn-floating modal-trigger red darkien-1"><i class="material-icons">add</i></button>
                </li>
            </ul>
        </div>
        <div id="addpost-modal" class="modal modal-scriptum">
            <form ng-submit="addPost()">
                <div class="modal-content">
                    <div class="row">
                        <div class="input-field col s12">
                            <i class="material-icons prefix">subject</i>
                            <input type="text" ng-model="newPost.title" length="30">
                            <label for="title-input">Title</label>
                        </div>
                        <div class="input-field col s12">
                            <i class="material-icons prefix">create</i>
                            <textarea type="text" ng-model="newPost.body" class="materialize-textarea" length="250"></textarea>
                            <label for="content-input">Content</label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn indigo waves-effect">add post</button>
                    <a ng-click="resetPost()" class="btn-flat waves-effect waves-red">close</a>
                </div>
            </form>
        </div>
    </div>
</body>

</html>
